.. highlight:: cl
   :linenothreshold: 0

Chapter 8 符号 (Symbols)
***************************************************

符号我们已经用了好长一段时间。蕴藏在符号背後还有更多。起初或许最好不要纠结背後的实现机制。你可以像数据对象与名字那样使用符号，而不需要理解两者是如何相关联的。但到了某个时候，停下来并思考背後是如何动作的是很有用的。这个章节解释了背後的细节。

8.1 符号名 (Symbol Names)
==================================

第二章描述符号是用来作为变量名并作为一个变量存在。但 Lisp 符号的可能性要比在多数语言仅允许作为变量名来得广泛许多。实际上，一个符号可以用任何字串作为名称。你可以透过呼叫 ``symbol-name`` 来获得符号的名字：

::

	> (symbol-name 'abc)
	"ABC"

注意到这个符号的名字全部是大写字母。预设情况下 Common Lisp 在读入时，把符号名所有的英文字母都转成大写。这也表示了，Common Lisp 预设是不分大小写的：

::

	> (eql 'abc 'Abc)
	T
	> (CaR '(a b c))
	A

有一个特殊的语法用来参照符号的名字，一些名字包含空白或其他可能对於读取器 (reader)重要的字符。任何存在垂直杠 (vertical bar)之间的字符序列被视为一个符号。你可以这样子在符号的名字中放入任何东西：

::

	> (list '|Lisp 1.5| '|| '|abc| '|ABC|)
	(|Lisp 1.5| || |abc| ABC)

当这样的符号名读入时，不会有大小写转换，而巨集字符和其他的字符被视为一般字符。

那什麽样的符号不需要使用垂直杠来参照呢？基本上任何符号不是一个数字或不包含读取器视为重要的字符。一个快速找出你是否可以不用垂直杠来参照符号的方法是看看 Lisp 如何印出它的。如果 Lisp 没有用垂直杠表示一个符号，如上述列表的最後一个，那你也可以不用垂直杠。

记得垂直杠是一个特殊的语法来表示符号。它们不是符号的名字之一：

::

	> (symbol-name '|a b c|)
	"a b c"

(如果你想要在符号名使用垂直杠，你可以放一个反斜线在垂直杠的前面。)

译注: 反斜线是 ``\`` 。


8.2 属性列表 (Property Lists)
===============================

在 Common Lisp 里，每一个符号都有一个属性列表 (property-list) 或称为 ``plist`` 。函数 ``get`` 接受一个符号及一个任何类型的键值，然後返回在符号的属性列表中，与键值相关的数值：

::

	> (get 'alizarin 'color)
	NIL

它使用 ``eql`` 来比较各个键。若某个特定的属性没有找到时， ``get`` 返回 ``nil`` 。

要将一个值与一个键相关联时，你可以使用 ``setf`` 及 ``get`` :

::

	> (setf (get 'alizarin 'color) 'red)
	RED
	> (get 'alizarin 'color)
	RED

现在符号 ``alizarin`` 的 ``color`` 属性是 ``red`` 。

.. figure:: https://github.com/JuanitoFatas/acl-chinese/raw/master/images/Figure-8.1.png

**图 8.1 符号的结构**

::

	> (setf (get 'alizarin 'transparency) 'high)
	HIGH
	> (symbol-plist 'alizarin)
	(TRANSPARENCY HIGH COLOR RED)

注意到属性列表不以关联列表 (assoc-lists)的形式表示，虽然他们用起来是一样的。（译注: 关联列表在 3.14 节讨论过）

在 Common Lisp 里，属性列表用得不多。他们大部分被哈希表取代了 (4.8 小节)。


8.3 符号很不简单 (Symbols Are Big)
================================

8.4 创建符号 (Creating Symbols)
===================================================

8.5 多重包 (Multiple Packages)
=======================================

8.6 关键字 (Keywords)
=======================================

8.7 符号与变量 (Symbols and Variables)
=======================================

8.6 示例：随机文本 (Example: Random Text)
=======================================

Chapter 8 总结 (Summary)
============================

Chapter 8 练习 (Exercises)
==================================
